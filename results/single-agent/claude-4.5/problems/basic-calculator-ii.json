{
  "Question": {
    "Data": {
      "Question": {
        "questionFrontendId": "227",
        "questionId": "227",
        "Content": "<p>Given a string <code>s</code> which represents an expression, <em>evaluate this expression and return its value</em>.&nbsp;</p>\n\n<p>The integer division should truncate toward zero.</p>\n\n<p>You may assume that the given expression is always valid. All intermediate results will be in the range of <code>[-2<sup>31</sup>, 2<sup>31</sup> - 1]</code>.</p>\n\n<p><strong>Note:</strong> You are not allowed to use any built-in function which evaluates strings as mathematical expressions, such as <code>eval()</code>.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n<pre><strong>Input:</strong> s = \"3+2*2\"\n<strong>Output:</strong> 7\n</pre><p><strong class=\"example\">Example 2:</strong></p>\n<pre><strong>Input:</strong> s = \" 3/2 \"\n<strong>Output:</strong> 1\n</pre><p><strong class=\"example\">Example 3:</strong></p>\n<pre><strong>Input:</strong> s = \" 3+5 / 2 \"\n<strong>Output:</strong> 5\n</pre>\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= s.length &lt;= 3 * 10<sup>5</sup></code></li>\n\t<li><code>s</code> consists of integers and operators <code>(&#39;+&#39;, &#39;-&#39;, &#39;*&#39;, &#39;/&#39;)</code> separated by some number of spaces.</li>\n\t<li><code>s</code> represents <strong>a valid expression</strong>.</li>\n\t<li>All the integers in the expression are non-negative integers in the range <code>[0, 2<sup>31</sup> - 1]</code>.</li>\n\t<li>The answer is <strong>guaranteed</strong> to fit in a <strong>32-bit integer</strong>.</li>\n</ul>\n",
        "SampleTestCase": "\"3+2*2\"",
        "ExampleTestcases": "\"3+2*2\"\n\" 3/2 \"\n\" 3+5 / 2 \"",
        "Difficulty": "Medium",
        "Title": "Basic Calculator II",
        "TitleSlug": "basic-calculator-ii",
        "IsPaidOnly": false,
        "Stats": "{\"totalAccepted\": \"900.2K\", \"totalSubmission\": \"1.9M\", \"totalAcceptedRaw\": 900177, \"totalSubmissionRaw\": 1941487, \"acRate\": \"46.4%\"}",
        "Likes": 6518,
        "Dislikes": 947,
        "FreqBar": 0,
        "CategoryTitle": "Algorithms",
        "TopicTags": [
          {
            "Id": "VG9waWNUYWdOb2RlOjg=",
            "Name": "Math",
            "Slug": "math"
          },
          {
            "Id": "VG9waWNUYWdOb2RlOjEw",
            "Name": "String",
            "Slug": "string"
          },
          {
            "Id": "VG9waWNUYWdOb2RlOjE1",
            "Name": "Stack",
            "Slug": "stack"
          }
        ],
        "CodeSnippets": [
          {
            "Lang": "C++",
            "LangSlug": "cpp",
            "Code": "class Solution {\npublic:\n    int calculate(string s) {\n        \n    }\n};"
          },
          {
            "Lang": "Java",
            "LangSlug": "java",
            "Code": "class Solution {\n    public int calculate(String s) {\n        \n    }\n}"
          },
          {
            "Lang": "Python3",
            "LangSlug": "python3",
            "Code": "class Solution:\n    def calculate(self, s: str) -> int:\n        "
          },
          {
            "Lang": "Python",
            "LangSlug": "python",
            "Code": "class Solution(object):\n    def calculate(self, s):\n        \"\"\"\n        :type s: str\n        :rtype: int\n        \"\"\"\n        "
          },
          {
            "Lang": "JavaScript",
            "LangSlug": "javascript",
            "Code": "/**\n * @param {string} s\n * @return {number}\n */\nvar calculate = function(s) {\n    \n};"
          },
          {
            "Lang": "TypeScript",
            "LangSlug": "typescript",
            "Code": "function calculate(s: string): number {\n    \n};"
          },
          {
            "Lang": "C#",
            "LangSlug": "csharp",
            "Code": "public class Solution {\n    public int Calculate(string s) {\n        \n    }\n}"
          },
          {
            "Lang": "C",
            "LangSlug": "c",
            "Code": "int calculate(char* s) {\n    \n}"
          },
          {
            "Lang": "Go",
            "LangSlug": "golang",
            "Code": "func calculate(s string) int {\n    \n}"
          },
          {
            "Lang": "Kotlin",
            "LangSlug": "kotlin",
            "Code": "class Solution {\n    fun calculate(s: String): Int {\n        \n    }\n}"
          },
          {
            "Lang": "Swift",
            "LangSlug": "swift",
            "Code": "class Solution {\n    func calculate(_ s: String) -> Int {\n        \n    }\n}"
          },
          {
            "Lang": "Rust",
            "LangSlug": "rust",
            "Code": "impl Solution {\n    pub fn calculate(s: String) -> i32 {\n        \n    }\n}"
          },
          {
            "Lang": "Ruby",
            "LangSlug": "ruby",
            "Code": "# @param {String} s\n# @return {Integer}\ndef calculate(s)\n    \nend"
          },
          {
            "Lang": "PHP",
            "LangSlug": "php",
            "Code": "class Solution {\n\n    /**\n     * @param String $s\n     * @return Integer\n     */\n    function calculate($s) {\n        \n    }\n}"
          },
          {
            "Lang": "Dart",
            "LangSlug": "dart",
            "Code": "class Solution {\n  int calculate(String s) {\n    \n  }\n}"
          },
          {
            "Lang": "Scala",
            "LangSlug": "scala",
            "Code": "object Solution {\n    def calculate(s: String): Int = {\n        \n    }\n}"
          },
          {
            "Lang": "Elixir",
            "LangSlug": "elixir",
            "Code": "defmodule Solution do\n  @spec calculate(s :: String.t) :: integer\n  def calculate(s) do\n    \n  end\nend"
          },
          {
            "Lang": "Erlang",
            "LangSlug": "erlang",
            "Code": "-spec calculate(S :: unicode:unicode_binary()) -> integer().\ncalculate(S) ->\n  ."
          },
          {
            "Lang": "Racket",
            "LangSlug": "racket",
            "Code": "(define/contract (calculate s)\n  (-> string? exact-integer?)\n  )"
          }
        ],
        "CompanyTagStats": ""
      }
    },
    "DownloadedAt": "2025-11-17T15:26:24.964965+01:00",
    "AcRate": "46.4",
    "TotalSubmissions": 1941487,
    "TotalAccepted": 900177,
    "AcceptanceRate": 0.46365337496465336,
    "ContentFeatures": "",
    "CodeSnippetFeatures": {
      "c": "",
      "cpp": "",
      "csharp": "",
      "dart": "",
      "elixir": "",
      "erlang": "",
      "golang": "",
      "java": "",
      "javascript": "",
      "kotlin": "",
      "php": "",
      "python": "",
      "python3": "",
      "racket": "",
      "ruby": "",
      "rust": "",
      "scala": "",
      "swift": "",
      "typescript": ""
    },
    "Url": "https://leetcode.com/problems/basic-calculator-ii/"
  },
  "Solutions": {
    "anthropic/claude-sonnet-4.5": {
      "Lang": "python3",
      "Prompt": "Hi, this is a coding interview. You will be given:\n* A problem statement (with sample test cases if available).\n* A starter code snippet (with fixed function signatures).\n\nPlease write your solution in the python3 programming language. Your code must:\n* Solve the problem fully and correctly.\n* Pass all provided sample test cases.\n* Run within acceptable time and memory limits (assume large inputs if none are specified).\n* Follow good coding practices (clear logic, readable structure, appropriate use of language features).\n\nHere is the problem statement: Given a string s which represents an expression, evaluate this expression and return its value.\u00a0\nThe integer division should truncate toward zero.\nYou may assume that the given expression is always valid. All intermediate results will be in the range of [-2^31, 2^31 - 1].\nNote: You are not allowed to use any built-in function which evaluates strings as mathematical expressions, such as eval().\n\u00a0\nExample 1:\nInput: s = \"3+2*2\"\nOutput: 7\nExample 2:\nInput: s = \" 3/2 \"\nOutput: 1\nExample 3:\nInput: s = \" 3+5 / 2 \"\nOutput: 5\n\u00a0\nConstraints:\n\t1 <= s.length <= 3 * 10^5\n\ts consists of integers and operators ('+', '-', '*', '/') separated by some number of spaces.\n\ts represents a valid expression.\n\tAll the integers in the expression are non-negative integers in the range [0, 2^31 - 1].\n\tThe answer is guaranteed to fit in a 32-bit integer.\n\nHere is the code snippet, which you should expand with your solution: class Solution:\n    def calculate(self, s: str) -> int:\n        \n\nImportant Requirements:\n* Do not change any provided function signatures, class names, or method names.\n* Output only valid source code that can be executed as-is, without any further improvements or bugfixes.\n* Do not include docstrings, markdown, or commentary in your final code.\n\nGood luck!\n",
      "Answer": "Looking at this problem, I need to evaluate a mathematical expression with +, -, *, / operators following proper operator precedence (multiplication and division before addition and subtraction).\n\nThe key insight is to use a stack-based approach:\n1. Process numbers and operators from left to right\n2. For + and -, push numbers to stack (negative for subtraction)\n3. For * and /, immediately apply to the last number on stack\n4. Sum all numbers in stack at the end\n\nHere's my approach:\n- Parse the string character by character\n- Build numbers digit by digit\n- Keep track of the last operator seen\n- Use a stack to handle operator precedence\n- When we see + or -, we push the previous number (with appropriate sign)\n- When we see * or /, we pop from stack and apply operation immediately\n\n```python\nclass Solution:\n    def calculate(self, s: str) -> int:\n        if not s:\n            return 0\n        \n        stack = []\n        num = 0\n        operation = '+'\n        \n        for i, char in enumerate(s):\n            if char.isdigit():\n                num = num * 10 + int(char)\n            \n            if char in '+-*/' or i == len(s) - 1:\n                if i == len(s) - 1 or char in '+-*/':\n                    if operation == '+':\n                        stack.append(num)\n                    elif operation == '-':\n                        stack.append(-num)\n                    elif operation == '*':\n                        stack.append(stack.pop() * num)\n                    elif operation == '/':\n                        stack.append(int(stack.pop() / num))\n                    \n                    if char in '+-*/':\n                        operation = char\n                        num = 0\n        \n        return sum(stack)\n```\n\nWait, let me reconsider the logic. The issue is that I need to process the operation when I encounter the NEXT operator or reach the end of string. Let me refactor:\n\n```python\nclass Solution:\n    def calculate(self, s: str) -> int:\n        if not s:\n            return 0\n        \n        stack = []\n        num = 0\n        operation = '+'\n        \n        for i, char in enumerate(s):\n            if char.isdigit():\n                num = num * 10 + int(char)\n            \n            if char in '+-*/' or i == len(s) - 1:\n                if char != ' ' or i == len(s) - 1:\n                    if i == len(s) - 1 and char.isdigit():\n                        pass\n                    elif char in '+-*/' or i == len(s) - 1:\n                        if operation == '+':\n                            stack.append(num)\n                        elif operation == '-':\n                            stack.append(-num)\n                        elif operation == '*':\n                            stack.append(stack.pop() * num)\n                        elif operation == '/':\n                            stack.append(int(stack.pop() / num))\n                        \n                        if char in '+-*/':\n                            operation = char\n                        num = 0\n        \n        return sum(stack)\n```\n\nLet me simplify this more clearly:\n\n```python\nclass Solution:\n    def calculate(self, s: str) -> int:\n        stack = []\n        num = 0\n        operation = '+'\n        \n        for i, char in enumerate(s):\n            if char.isdigit():\n                num = num * 10 + int(char)\n            \n            if char != ' ' and not char.isdigit() or i == len(s) - 1:\n                if operation == '+':\n                    stack.append(num)\n                elif operation == '-':\n                    stack.append(-num)\n                elif operation == '*':\n                    stack.append(stack.pop() * num)\n                elif operation == '/':\n                    stack.append(int(stack.pop() / num))\n                \n                if i < len(s) - 1:\n                    operation = char\n                num = 0\n        \n        return sum(stack)\n```",
      "TypedCode": "\nclass Solution:\n    def calculate(self, s: str) -> int:\n        if not s:\n            return 0\n        \n        stack = []\n        num = 0\n        operation = '+'\n        \n        for i, char in enumerate(s):\n            if char.isdigit():\n                num = num * 10 + int(char)\n            \n            if char in '+-*/' or i == len(s) - 1:\n                if i == len(s) - 1 or char in '+-*/':\n                    if operation == '+':\n                        stack.append(num)\n                    elif operation == '-':\n                        stack.append(-num)\n                    elif operation == '*':\n                        stack.append(stack.pop() * num)\n                    elif operation == '/':\n                        stack.append(int(stack.pop() / num))\n                    \n                    if char in '+-*/':\n                        operation = char\n                        num = 0\n        \n        return sum(stack)\n",
      "Model": "anthropic/claude-sonnet-4.5",
      "Latency": 14382226709,
      "SolvedAt": "2025-11-19T21:34:22.026954+01:00",
      "PromptTokens": 486,
      "OutputTokens": 985
    }
  },
  "Submissions": {
    "anthropic/claude-sonnet-4.5": {
      "SubmitRequest": {
        "lang": "python3",
        "question_id": "227",
        "typed_code": "\nclass Solution:\n    def calculate(self, s: str) -> int:\n        if not s:\n            return 0\n        \n        stack = []\n        num = 0\n        operation = '+'\n        \n        for i, char in enumerate(s):\n            if char.isdigit():\n                num = num * 10 + int(char)\n            \n            if char in '+-*/' or i == len(s) - 1:\n                if i == len(s) - 1 or char in '+-*/':\n                    if operation == '+':\n                        stack.append(num)\n                    elif operation == '-':\n                        stack.append(-num)\n                    elif operation == '*':\n                        stack.append(stack.pop() * num)\n                    elif operation == '/':\n                        stack.append(int(stack.pop() / num))\n                    \n                    if char in '+-*/':\n                        operation = char\n                        num = 0\n        \n        return sum(stack)\n"
      },
      "SubmissionId": 0,
      "CheckResponse": {
        "status_code": 10,
        "status_msg": "Accepted",
        "Finished": true,
        "State": "SUCCESS"
      },
      "SubmittedAt": "2025-11-19T22:37:53+01:00"
    }
  }
}