{
  "Question": {
    "Data": {
      "Question": {
        "questionFrontendId": "726",
        "questionId": "726",
        "Content": "<p>Given a string <code>formula</code> representing a chemical formula, return <em>the count of each atom</em>.</p>\n\n<p>The atomic element always starts with an uppercase character, then zero or more lowercase letters, representing the name.</p>\n\n<p>One or more digits representing that element&#39;s count may follow if the count is greater than <code>1</code>. If the count is <code>1</code>, no digits will follow.</p>\n\n<ul>\n\t<li>For example, <code>&quot;H2O&quot;</code> and <code>&quot;H2O2&quot;</code> are possible, but <code>&quot;H1O2&quot;</code> is impossible.</li>\n</ul>\n\n<p>Two formulas are concatenated together to produce another formula.</p>\n\n<ul>\n\t<li>For example, <code>&quot;H2O2He3Mg4&quot;</code> is also a formula.</li>\n</ul>\n\n<p>A formula placed in parentheses, and a count (optionally added) is also a formula.</p>\n\n<ul>\n\t<li>For example, <code>&quot;(H2O2)&quot;</code> and <code>&quot;(H2O2)3&quot;</code> are formulas.</li>\n</ul>\n\n<p>Return the count of all elements as a string in the following form: the first name (in sorted order), followed by its count (if that count is more than <code>1</code>), followed by the second name (in sorted order), followed by its count (if that count is more than <code>1</code>), and so on.</p>\n\n<p>The test cases are generated so that all the values in the output fit in a <strong>32-bit</strong> integer.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<pre>\n<strong>Input:</strong> formula = &quot;H2O&quot;\n<strong>Output:</strong> &quot;H2O&quot;\n<strong>Explanation:</strong> The count of elements are {&#39;H&#39;: 2, &#39;O&#39;: 1}.\n</pre>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<pre>\n<strong>Input:</strong> formula = &quot;Mg(OH)2&quot;\n<strong>Output:</strong> &quot;H2MgO2&quot;\n<strong>Explanation:</strong> The count of elements are {&#39;H&#39;: 2, &#39;Mg&#39;: 1, &#39;O&#39;: 2}.\n</pre>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n\n<pre>\n<strong>Input:</strong> formula = &quot;K4(ON(SO3)2)2&quot;\n<strong>Output:</strong> &quot;K4N2O14S4&quot;\n<strong>Explanation:</strong> The count of elements are {&#39;K&#39;: 4, &#39;N&#39;: 2, &#39;O&#39;: 14, &#39;S&#39;: 4}.\n</pre>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= formula.length &lt;= 1000</code></li>\n\t<li><code>formula</code> consists of English letters, digits, <code>&#39;(&#39;</code>, and <code>&#39;)&#39;</code>.</li>\n\t<li><code>formula</code> is always valid.</li>\n</ul>\n",
        "SampleTestCase": "\"H2O\"",
        "ExampleTestcases": "\"H2O\"\n\"Mg(OH)2\"\n\"K4(ON(SO3)2)2\"",
        "Difficulty": "Hard",
        "Title": "Number of Atoms",
        "TitleSlug": "number-of-atoms",
        "IsPaidOnly": false,
        "Stats": "{\"totalAccepted\": \"158.4K\", \"totalSubmission\": \"243.5K\", \"totalAcceptedRaw\": 158389, \"totalSubmissionRaw\": 243519, \"acRate\": \"65.0%\"}",
        "Likes": 1959,
        "Dislikes": 411,
        "FreqBar": 0,
        "CategoryTitle": "Algorithms",
        "TopicTags": [
          {
            "Id": "VG9waWNUYWdOb2RlOjY=",
            "Name": "Hash Table",
            "Slug": "hash-table"
          },
          {
            "Id": "VG9waWNUYWdOb2RlOjEw",
            "Name": "String",
            "Slug": "string"
          },
          {
            "Id": "VG9waWNUYWdOb2RlOjE1",
            "Name": "Stack",
            "Slug": "stack"
          },
          {
            "Id": "VG9waWNUYWdOb2RlOjYxMDQ5",
            "Name": "Sorting",
            "Slug": "sorting"
          }
        ],
        "CodeSnippets": [
          {
            "Lang": "C++",
            "LangSlug": "cpp",
            "Code": "class Solution {\npublic:\n    string countOfAtoms(string formula) {\n        \n    }\n};"
          },
          {
            "Lang": "Java",
            "LangSlug": "java",
            "Code": "class Solution {\n    public String countOfAtoms(String formula) {\n        \n    }\n}"
          },
          {
            "Lang": "Python3",
            "LangSlug": "python3",
            "Code": "class Solution:\n    def countOfAtoms(self, formula: str) -> str:\n        "
          },
          {
            "Lang": "Python",
            "LangSlug": "python",
            "Code": "class Solution(object):\n    def countOfAtoms(self, formula):\n        \"\"\"\n        :type formula: str\n        :rtype: str\n        \"\"\"\n        "
          },
          {
            "Lang": "JavaScript",
            "LangSlug": "javascript",
            "Code": "/**\n * @param {string} formula\n * @return {string}\n */\nvar countOfAtoms = function(formula) {\n    \n};"
          },
          {
            "Lang": "TypeScript",
            "LangSlug": "typescript",
            "Code": "function countOfAtoms(formula: string): string {\n    \n};"
          },
          {
            "Lang": "C#",
            "LangSlug": "csharp",
            "Code": "public class Solution {\n    public string CountOfAtoms(string formula) {\n        \n    }\n}"
          },
          {
            "Lang": "C",
            "LangSlug": "c",
            "Code": "char* countOfAtoms(char* formula) {\n    \n}"
          },
          {
            "Lang": "Go",
            "LangSlug": "golang",
            "Code": "func countOfAtoms(formula string) string {\n    \n}"
          },
          {
            "Lang": "Kotlin",
            "LangSlug": "kotlin",
            "Code": "class Solution {\n    fun countOfAtoms(formula: String): String {\n        \n    }\n}"
          },
          {
            "Lang": "Swift",
            "LangSlug": "swift",
            "Code": "class Solution {\n    func countOfAtoms(_ formula: String) -> String {\n        \n    }\n}"
          },
          {
            "Lang": "Rust",
            "LangSlug": "rust",
            "Code": "impl Solution {\n    pub fn count_of_atoms(formula: String) -> String {\n        \n    }\n}"
          },
          {
            "Lang": "Ruby",
            "LangSlug": "ruby",
            "Code": "# @param {String} formula\n# @return {String}\ndef count_of_atoms(formula)\n    \nend"
          },
          {
            "Lang": "PHP",
            "LangSlug": "php",
            "Code": "class Solution {\n\n    /**\n     * @param String $formula\n     * @return String\n     */\n    function countOfAtoms($formula) {\n        \n    }\n}"
          },
          {
            "Lang": "Dart",
            "LangSlug": "dart",
            "Code": "class Solution {\n  String countOfAtoms(String formula) {\n    \n  }\n}"
          },
          {
            "Lang": "Scala",
            "LangSlug": "scala",
            "Code": "object Solution {\n    def countOfAtoms(formula: String): String = {\n        \n    }\n}"
          },
          {
            "Lang": "Elixir",
            "LangSlug": "elixir",
            "Code": "defmodule Solution do\n  @spec count_of_atoms(formula :: String.t) :: String.t\n  def count_of_atoms(formula) do\n    \n  end\nend"
          },
          {
            "Lang": "Erlang",
            "LangSlug": "erlang",
            "Code": "-spec count_of_atoms(Formula :: unicode:unicode_binary()) -> unicode:unicode_binary().\ncount_of_atoms(Formula) ->\n  ."
          },
          {
            "Lang": "Racket",
            "LangSlug": "racket",
            "Code": "(define/contract (count-of-atoms formula)\n  (-> string? string?)\n  )"
          }
        ],
        "CompanyTagStats": ""
      }
    },
    "DownloadedAt": "2025-11-17T15:04:31.713984+01:00",
    "AcRate": "65.0",
    "TotalSubmissions": 243519,
    "TotalAccepted": 158389,
    "AcceptanceRate": 0.6504174212279124,
    "ContentFeatures": "",
    "CodeSnippetFeatures": {
      "c": "",
      "cpp": "",
      "csharp": "",
      "dart": "",
      "elixir": "",
      "erlang": "",
      "golang": "",
      "java": "",
      "javascript": "",
      "kotlin": "",
      "php": "",
      "python": "",
      "python3": "",
      "racket": "",
      "ruby": "",
      "rust": "",
      "scala": "",
      "swift": "",
      "typescript": ""
    },
    "Url": "https://leetcode.com/problems/number-of-atoms/"
  },
  "Solutions": {
    "openai/gpt-5.1": {
      "Lang": "python3",
      "Prompt": "Multi-agent approach:\n1. Analysis\n2. Design\n3. Implementation\n4. Verification",
      "Answer": "=== ANALYSIS ===\nclass Solution:\n    def countOfAtoms(self, formula: str) -> str:\n        from collections import defaultdict\n        \n        n = len(formula)\n        i = 0\n        stack = [defaultdict(int)]\n        \n        while i < n:\n            c = formula[i]\n            if c == '(':\n                stack.append(defaultdict(int))\n                i += 1\n            elif c == ')':\n                i += 1\n                start = i\n                while i < n and formula[i].isdigit():\n                    i += 1\n                mult = int(formula[start:i]) if start < i else 1\n                top = stack.pop()\n                for atom, cnt in top.items():\n                    stack[-1][atom] += cnt * mult\n            else:\n                if c.isupper():\n                    start = i\n                    i += 1\n                    while i < n and formula[i].islower():\n                        i += 1\n                    atom = formula[start:i]\n                    start_num = i\n                    while i < n and formula[i].isdigit():\n                        i += 1\n                    num = int(start_num and formula[start_num:i] or '1') if start_num < i else 1\n                    stack[-1][atom] += num\n                else:\n                    i += 1\n        \n        counts = stack[-1]\n        result = []\n        for atom in sorted(counts.keys()):\n            result.append(atom)\n            if counts[atom] > 1:\n                result.append(str(counts[atom]))\n        return ''.join(result)\n\n=== DESIGN ===\nclass Solution:\n    def countOfAtoms(self, formula: str) -> str:\n        from collections import defaultdict\n        \n        n = len(formula)\n        i = 0\n        stack = [defaultdict(int)]\n        \n        while i < n:\n            c = formula[i]\n            if c == '(':\n                stack.append(defaultdict(int))\n                i += 1\n            elif c == ')':\n                i += 1\n                start = i\n                while i < n and formula[i].isdigit():\n                    i += 1\n                mult = int(formula[start:i]) if start < i else 1\n                top = stack.pop()\n                for atom, cnt in top.items():\n                    stack[-1][atom] += cnt * mult\n            else:\n                if c.isupper():\n                    start = i\n                    i += 1\n                    while i < n and formula[i].islower():\n                        i += 1\n                    atom = formula[start:i]\n                    start_num = i\n                    while i < n and formula[i].isdigit():\n                        i += 1\n                    num = int(formula[start_num:i]) if start_num < i else 1\n                    stack[-1][atom] += num\n                else:\n                    i += 1\n        \n        counts = stack[-1]\n        result = []\n        for atom in sorted(counts.keys()):\n            result.append(atom)\n            if counts[atom] > 1:\n                result.append(str(counts[atom]))\n        return ''.join(result)\n\n=== IMPLEMENTATION ===\nclass Solution:\n    def countOfAtoms(self, formula: str) -> str:\n        from collections import defaultdict\n        \n        n = len(formula)\n        i = 0\n        stack = [defaultdict(int)]\n        \n        while i < n:\n            c = formula[i]\n            if c == '(':\n                stack.append(defaultdict(int))\n                i += 1\n            elif c == ')':\n                i += 1\n                start = i\n                while i < n and formula[i].isdigit():\n                    i += 1\n                mult = int(formula[start:i]) if start < i else 1\n                top = stack.pop()\n                for atom, cnt in top.items():\n                    stack[-1][atom] += cnt * mult\n            else:\n                if c.isupper():\n                    start = i\n                    i += 1\n                    while i < n and formula[i].islower():\n                        i += 1\n                    atom = formula[start:i]\n                    start_num = i\n                    while i < n and formula[i].isdigit():\n                        i += 1\n                    num = int(formula[start_num:i]) if start_num < i else 1\n                    stack[-1][atom] += num\n                else:\n                    i += 1\n        \n        counts = stack[-1]\n        result = []\n        for atom in sorted(counts.keys()):\n            result.append(atom)\n            if counts[atom] > 1:\n                result.append(str(counts[atom]))\n        return ''.join(result)\n\n=== VERIFICATION ===\nclass Solution:\n    def countOfAtoms(self, formula: str) -> str:\n        from collections import defaultdict\n        \n        n = len(formula)\n        i = 0\n        stack = [defaultdict(int)]\n        \n        while i < n:\n            c = formula[i]\n            if c == '(':\n                stack.append(defaultdict(int))\n                i += 1\n            elif c == ')':\n                i += 1\n                start = i\n                while i < n and formula[i].isdigit():\n                    i += 1\n                mult = int(formula[start:i]) if start < i else 1\n                top = stack.pop()\n                for atom, cnt in top.items():\n                    stack[-1][atom] += cnt * mult\n            else:\n                if c.isupper():\n                    start = i\n                    i += 1\n                    while i < n and formula[i].islower():\n                        i += 1\n                    atom = formula[start:i]\n                    start_num = i\n                    while i < n and formula[i].isdigit():\n                        i += 1\n                    num = int(formula[start_num:i]) if start_num < i else 1\n                    stack[-1][atom] += num\n                else:\n                    i += 1\n        \n        counts = stack[-1]\n        result = []\n        for atom in sorted(counts.keys()):\n            result.append(atom)\n            if counts[atom] > 1:\n                result.append(str(counts[atom]))\n        return ''.join(result)\n\n",
      "TypedCode": "class Solution:\n    def countOfAtoms(self, formula: str) -> str:\n        from collections import defaultdict\n        \n        n = len(formula)\n        i = 0\n        stack = [defaultdict(int)]\n        \n        while i < n:\n            c = formula[i]\n            if c == '(':\n                stack.append(defaultdict(int))\n                i += 1\n            elif c == ')':\n                i += 1\n                start = i\n                while i < n and formula[i].isdigit():\n                    i += 1\n                mult = int(formula[start:i]) if start < i else 1\n                top = stack.pop()\n                for atom, cnt in top.items():\n                    stack[-1][atom] += cnt * mult\n            else:\n                if c.isupper():\n                    start = i\n                    i += 1\n                    while i < n and formula[i].islower():\n                        i += 1\n                    atom = formula[start:i]\n                    start_num = i\n                    while i < n and formula[i].isdigit():\n                        i += 1\n                    num = int(formula[start_num:i]) if start_num < i else 1\n                    stack[-1][atom] += num\n                else:\n                    i += 1\n        \n        counts = stack[-1]\n        result = []\n        for atom in sorted(counts.keys()):\n            result.append(atom)\n            if counts[atom] > 1:\n                result.append(str(counts[atom]))\n        return ''.join(result)",
      "Model": "openai/gpt-5.1",
      "Latency": 63120592002,
      "SolvedAt": "2025-11-19T16:07:11.220181+01:00",
      "PromptTokens": 5121,
      "OutputTokens": 4019
    }
  },
  "Submissions": {
    "openai/gpt-5.1": {
      "SubmitRequest": {
        "lang": "python3",
        "question_id": "726",
        "typed_code": "class Solution:\n    def countOfAtoms(self, formula: str) -> str:\n        from collections import defaultdict\n        \n        n = len(formula)\n        i = 0\n        stack = [defaultdict(int)]\n        \n        while i < n:\n            c = formula[i]\n            if c == '(':\n                stack.append(defaultdict(int))\n                i += 1\n            elif c == ')':\n                i += 1\n                start = i\n                while i < n and formula[i].isdigit():\n                    i += 1\n                mult = int(formula[start:i]) if start < i else 1\n                top = stack.pop()\n                for atom, cnt in top.items():\n                    stack[-1][atom] += cnt * mult\n            else:\n                if c.isupper():\n                    start = i\n                    i += 1\n                    while i < n and formula[i].islower():\n                        i += 1\n                    atom = formula[start:i]\n                    start_num = i\n                    while i < n and formula[i].isdigit():\n                        i += 1\n                    num = int(formula[start_num:i]) if start_num < i else 1\n                    stack[-1][atom] += num\n                else:\n                    i += 1\n        \n        counts = stack[-1]\n        result = []\n        for atom in sorted(counts.keys()):\n            result.append(atom)\n            if counts[atom] > 1:\n                result.append(str(counts[atom]))\n        return ''.join(result)"
      },
      "SubmissionId": 0,
      "CheckResponse": {
        "status_code": 10,
        "status_msg": "Accepted",
        "Finished": true,
        "State": "SUCCESS"
      },
      "SubmittedAt": "2025-11-19T17:53:39+01:00"
    }
  }
}