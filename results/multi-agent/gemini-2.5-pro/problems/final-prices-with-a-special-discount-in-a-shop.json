{
  "Question": {
    "Data": {
      "Question": {
        "questionFrontendId": "1475",
        "questionId": "1570",
        "Content": "<p>You are given an integer array <code>prices</code> where <code>prices[i]</code> is the price of the <code>i<sup>th</sup></code> item in a shop.</p>\n\n<p>There is a special discount for items in the shop. If you buy the <code>i<sup>th</sup></code> item, then you will receive a discount equivalent to <code>prices[j]</code> where <code>j</code> is the minimum index such that <code>j &gt; i</code> and <code>prices[j] &lt;= prices[i]</code>. Otherwise, you will not receive any discount at all.</p>\n\n<p>Return an integer array <code>answer</code> where <code>answer[i]</code> is the final price you will pay for the <code>i<sup>th</sup></code> item of the shop, considering the special discount.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<pre>\n<strong>Input:</strong> prices = [8,4,6,2,3]\n<strong>Output:</strong> [4,2,4,2,3]\n<strong>Explanation:</strong> \nFor item 0 with price[0]=8 you will receive a discount equivalent to prices[1]=4, therefore, the final price you will pay is 8 - 4 = 4.\nFor item 1 with price[1]=4 you will receive a discount equivalent to prices[3]=2, therefore, the final price you will pay is 4 - 2 = 2.\nFor item 2 with price[2]=6 you will receive a discount equivalent to prices[3]=2, therefore, the final price you will pay is 6 - 2 = 4.\nFor items 3 and 4 you will not receive any discount at all.\n</pre>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<pre>\n<strong>Input:</strong> prices = [1,2,3,4,5]\n<strong>Output:</strong> [1,2,3,4,5]\n<strong>Explanation:</strong> In this case, for all items, you will not receive any discount at all.\n</pre>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n\n<pre>\n<strong>Input:</strong> prices = [10,1,1,6]\n<strong>Output:</strong> [9,0,1,6]\n</pre>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= prices.length &lt;= 500</code></li>\n\t<li><code>1 &lt;= prices[i] &lt;= 1000</code></li>\n</ul>\n",
        "SampleTestCase": "[8,4,6,2,3]",
        "ExampleTestcases": "[8,4,6,2,3]\n[1,2,3,4,5]\n[10,1,1,6]",
        "Difficulty": "Easy",
        "Title": "Final Prices With a Special Discount in a Shop",
        "TitleSlug": "final-prices-with-a-special-discount-in-a-shop",
        "IsPaidOnly": false,
        "Stats": "{\"totalAccepted\": \"346.1K\", \"totalSubmission\": \"413.8K\", \"totalAcceptedRaw\": 346123, \"totalSubmissionRaw\": 413821, \"acRate\": \"83.6%\"}",
        "Likes": 2809,
        "Dislikes": 144,
        "FreqBar": 0,
        "CategoryTitle": "Algorithms",
        "TopicTags": [
          {
            "Id": "VG9waWNUYWdOb2RlOjU=",
            "Name": "Array",
            "Slug": "array"
          },
          {
            "Id": "VG9waWNUYWdOb2RlOjE1",
            "Name": "Stack",
            "Slug": "stack"
          },
          {
            "Id": "VG9waWNUYWdOb2RlOjYxMDU0",
            "Name": "Monotonic Stack",
            "Slug": "monotonic-stack"
          }
        ],
        "CodeSnippets": [
          {
            "Lang": "C++",
            "LangSlug": "cpp",
            "Code": "class Solution {\npublic:\n    vector<int> finalPrices(vector<int>& prices) {\n        \n    }\n};"
          },
          {
            "Lang": "Java",
            "LangSlug": "java",
            "Code": "class Solution {\n    public int[] finalPrices(int[] prices) {\n        \n    }\n}"
          },
          {
            "Lang": "Python3",
            "LangSlug": "python3",
            "Code": "class Solution:\n    def finalPrices(self, prices: List[int]) -> List[int]:\n        "
          },
          {
            "Lang": "Python",
            "LangSlug": "python",
            "Code": "class Solution(object):\n    def finalPrices(self, prices):\n        \"\"\"\n        :type prices: List[int]\n        :rtype: List[int]\n        \"\"\"\n        "
          },
          {
            "Lang": "JavaScript",
            "LangSlug": "javascript",
            "Code": "/**\n * @param {number[]} prices\n * @return {number[]}\n */\nvar finalPrices = function(prices) {\n    \n};"
          },
          {
            "Lang": "TypeScript",
            "LangSlug": "typescript",
            "Code": "function finalPrices(prices: number[]): number[] {\n    \n};"
          },
          {
            "Lang": "C#",
            "LangSlug": "csharp",
            "Code": "public class Solution {\n    public int[] FinalPrices(int[] prices) {\n        \n    }\n}"
          },
          {
            "Lang": "C",
            "LangSlug": "c",
            "Code": "/**\n * Note: The returned array must be malloced, assume caller calls free().\n */\nint* finalPrices(int* prices, int pricesSize, int* returnSize) {\n    \n}"
          },
          {
            "Lang": "Go",
            "LangSlug": "golang",
            "Code": "func finalPrices(prices []int) []int {\n    \n}"
          },
          {
            "Lang": "Kotlin",
            "LangSlug": "kotlin",
            "Code": "class Solution {\n    fun finalPrices(prices: IntArray): IntArray {\n        \n    }\n}"
          },
          {
            "Lang": "Swift",
            "LangSlug": "swift",
            "Code": "class Solution {\n    func finalPrices(_ prices: [Int]) -> [Int] {\n        \n    }\n}"
          },
          {
            "Lang": "Rust",
            "LangSlug": "rust",
            "Code": "impl Solution {\n    pub fn final_prices(prices: Vec<i32>) -> Vec<i32> {\n        \n    }\n}"
          },
          {
            "Lang": "Ruby",
            "LangSlug": "ruby",
            "Code": "# @param {Integer[]} prices\n# @return {Integer[]}\ndef final_prices(prices)\n    \nend"
          },
          {
            "Lang": "PHP",
            "LangSlug": "php",
            "Code": "class Solution {\n\n    /**\n     * @param Integer[] $prices\n     * @return Integer[]\n     */\n    function finalPrices($prices) {\n        \n    }\n}"
          },
          {
            "Lang": "Dart",
            "LangSlug": "dart",
            "Code": "class Solution {\n  List<int> finalPrices(List<int> prices) {\n    \n  }\n}"
          },
          {
            "Lang": "Scala",
            "LangSlug": "scala",
            "Code": "object Solution {\n    def finalPrices(prices: Array[Int]): Array[Int] = {\n        \n    }\n}"
          },
          {
            "Lang": "Elixir",
            "LangSlug": "elixir",
            "Code": "defmodule Solution do\n  @spec final_prices(prices :: [integer]) :: [integer]\n  def final_prices(prices) do\n    \n  end\nend"
          },
          {
            "Lang": "Erlang",
            "LangSlug": "erlang",
            "Code": "-spec final_prices(Prices :: [integer()]) -> [integer()].\nfinal_prices(Prices) ->\n  ."
          },
          {
            "Lang": "Racket",
            "LangSlug": "racket",
            "Code": "(define/contract (final-prices prices)\n  (-> (listof exact-integer?) (listof exact-integer?))\n  )"
          }
        ],
        "CompanyTagStats": ""
      }
    },
    "DownloadedAt": "2025-11-17T14:20:14.390484+01:00",
    "AcRate": "83.6",
    "TotalSubmissions": 413821,
    "TotalAccepted": 346123,
    "AcceptanceRate": 0.8364075288590961,
    "ContentFeatures": "",
    "CodeSnippetFeatures": {
      "c": "",
      "cpp": "",
      "csharp": "",
      "dart": "",
      "elixir": "",
      "erlang": "",
      "golang": "",
      "java": "",
      "javascript": "",
      "kotlin": "",
      "php": "",
      "python": "",
      "python3": "",
      "racket": "",
      "ruby": "",
      "rust": "",
      "scala": "",
      "swift": "",
      "typescript": ""
    },
    "Url": "https://leetcode.com/problems/final-prices-with-a-special-discount-in-a-shop/"
  },
  "Solutions": {
    "google/gemini-2.5-pro": {
      "Lang": "python3",
      "Prompt": "Multi-agent approach:\n1. Analysis\n2. Design\n3. Implementation\n4. Verification",
      "Answer": "=== ANALYSIS ===\nThis is a full-fledged solution provided in the requested format.\n\n```python\nimport collections\n\nclass Solution:\n    def finalPrices(self, prices: list[int]) -> list[int]:\n        \"\"\"\n        Calculates the final prices after applying a special discount.\n\n        For each item `i`, the discount is the price of the first item `j` to its right\n        (j > i) such that prices[j] <= prices[i]. If no such item exists, there is no discount.\n\n        This implementation uses a monotonic stack to achieve an optimal time complexity of O(n).\n        \"\"\"\n        \n        # A monotonic stack is used to find the next smaller or equal element for each price.\n        # The stack will store indices of prices, maintaining them in a monotonically increasing order.\n        stack = []\n        \n        # We work on a copy of the prices list to store the final prices.\n        # This way, we do not modify the original input list, and items that\n        # do not get a discount will retain their original price by default.\n        final_prices = list(prices)\n\n        # Iterate through the prices list with both index and value.\n        for i, current_price in enumerate(prices):\n            # Check the top of the stack. If the price corresponding to the index\n            # at the top of the stack is greater than or equal to the current price,\n            # it means we've found the discount for that item.\n            while stack and prices[stack[-1]] >= current_price:\n                # The index of the item for which we found a discount.\n                item_index_to_discount = stack.pop()\n                \n                # The discount amount is the current price.\n                discount = current_price\n                \n                # Apply the discount to the corresponding final price.\n                final_prices[item_index_to_discount] -= discount\n            \n            # Push the current index onto the stack. This is done for every item,\n            # so it can potentially find its discount later.\n            stack.append(i)\n        \n        # Any indices that remain on the stack at the end of the loop correspond to\n        # items for which no subsequent smaller or equal price was found.\n        # Their final price is their original price, which is already correctly\n        # set in the `final_prices` list.\n        \n        return final_prices\n\n```\n\n=== DESIGN ===\nTo solve this problem, we need to find the first item to the right of each item `i` that has a price less than or equal to `prices[i]`. This \"next smaller or equal element\" problem is a classic use case for a monotonic stack.\n\nThe algorithm will iterate through the prices from left to right. A stack will be used to keep track of the indices of items for which we have not yet found a discount. The stack will maintain indices in such a way that their corresponding prices are in a monotonically increasing order.\n\nWhen we process a new price, `current_price` at index `i`, we compare it with the price of the item at the index on top of the stack. If the `current_price` is less than or equal to the price at the top of the stack, it means we've found the discount for the item on the stack. We then pop the index from the stack, apply the discount (which is the `current_price`), and repeat this process until the stack is empty or the condition is no longer met. Finally, we push the current index `i` onto the stack, as it now waits for its own discount to be found later in the array.\n\nThis approach ensures that for each item, the first smaller or equal price to its right is found efficiently. Since each index is pushed and popped from the stack at most once, the algorithm achieves a time complexity of O(N) and uses O(N) space for the stack and the result array.\n\n```python\nfrom typing import List\n\nclass Solution:\n    def finalPrices(self, prices: List[int]) -> List[int]:\n        final_prices = prices.copy()\n        stack = []\n        \n        for i, current_price in enumerate(prices):\n            while stack and prices[stack[-1]] >= current_price:\n                item_index = stack.pop()\n                final_prices[item_index] -= current_price\n            stack.append(i)\n            \n        return final_prices\n\n```\n\n=== IMPLEMENTATION ===\n```python\nfrom typing import List\n\nclass Solution:\n    def finalPrices(self, prices: List[int]) -> List[int]:\n        final_prices = prices.copy()\n        stack = []\n        \n        for i, current_price in enumerate(prices):\n            while stack and prices[stack[-1]] >= current_price:\n                item_index = stack.pop()\n                final_prices[item_index] -= current_price\n            stack.append(i)\n            \n        return final_prices\n```\n\n=== VERIFICATION ===\n```python\nfrom typing import List\n\nclass Solution:\n    def finalPrices(self, prices: List[int]) -> List[int]:\n        final_prices = prices.copy()\n        stack = []\n        \n        for i, current_price in enumerate(prices):\n            while stack and prices[stack[-1]] >= current_price:\n                item_index = stack.pop()\n                final_prices[item_index] -= current_price\n            stack.append(i)\n            \n        return final_prices\n```\n\n",
      "TypedCode": "\nfrom typing import List\n\nclass Solution:\n    def finalPrices(self, prices: List[int]) -> List[int]:\n        final_prices = prices.copy()\n        stack = []\n        \n        for i, current_price in enumerate(prices):\n            while stack and prices[stack[-1]] >= current_price:\n                item_index = stack.pop()\n                final_prices[item_index] -= current_price\n            stack.append(i)\n            \n        return final_prices\n",
      "Model": "google/gemini-2.5-pro",
      "Latency": 220761741375,
      "SolvedAt": "2025-11-21T11:03:26.799513+01:00",
      "PromptTokens": 5823,
      "OutputTokens": 25987
    }
  },
  "Submissions": {
    "google/gemini-2.5-pro": {
      "SubmitRequest": {
        "lang": "python3",
        "question_id": "1570",
        "typed_code": "\nfrom typing import List\n\nclass Solution:\n    def finalPrices(self, prices: List[int]) -> List[int]:\n        final_prices = prices.copy()\n        stack = []\n        \n        for i, current_price in enumerate(prices):\n            while stack and prices[stack[-1]] >= current_price:\n                item_index = stack.pop()\n                final_prices[item_index] -= current_price\n            stack.append(i)\n            \n        return final_prices\n"
      },
      "SubmissionId": 0,
      "CheckResponse": {
        "status_code": 10,
        "status_msg": "Accepted",
        "Finished": true,
        "State": "SUCCESS"
      },
      "SubmittedAt": "2025-11-21T21:13:04+01:00"
    }
  }
}