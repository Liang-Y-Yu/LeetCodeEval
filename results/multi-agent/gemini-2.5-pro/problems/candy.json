{
  "Question": {
    "Data": {
      "Question": {
        "questionFrontendId": "135",
        "questionId": "135",
        "Content": "<p>There are <code>n</code> children standing in a line. Each child is assigned a rating value given in the integer array <code>ratings</code>.</p>\n\n<p>You are giving candies to these children subjected to the following requirements:</p>\n\n<ul>\n\t<li>Each child must have at least one candy.</li>\n\t<li>Children with a higher rating get more candies than their neighbors.</li>\n</ul>\n\n<p>Return <em>the minimum number of candies you need to have to distribute the candies to the children</em>.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<pre>\n<strong>Input:</strong> ratings = [1,0,2]\n<strong>Output:</strong> 5\n<strong>Explanation:</strong> You can allocate to the first, second and third child with 2, 1, 2 candies respectively.\n</pre>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<pre>\n<strong>Input:</strong> ratings = [1,2,2]\n<strong>Output:</strong> 4\n<strong>Explanation:</strong> You can allocate to the first, second and third child with 1, 2, 1 candies respectively.\nThe third child gets 1 candy because it satisfies the above two conditions.\n</pre>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>n == ratings.length</code></li>\n\t<li><code>1 &lt;= n &lt;= 2 * 10<sup>4</sup></code></li>\n\t<li><code>0 &lt;= ratings[i] &lt;= 2 * 10<sup>4</sup></code></li>\n</ul>\n",
        "SampleTestCase": "[1,0,2]",
        "ExampleTestcases": "[1,0,2]\n[1,2,2]",
        "Difficulty": "Hard",
        "Title": "Candy",
        "TitleSlug": "candy",
        "IsPaidOnly": false,
        "Stats": "{\"totalAccepted\": \"950.9K\", \"totalSubmission\": \"2M\", \"totalAcceptedRaw\": 950854, \"totalSubmissionRaw\": 2001437, \"acRate\": \"47.5%\"}",
        "Likes": 9112,
        "Dislikes": 836,
        "FreqBar": 0,
        "CategoryTitle": "Algorithms",
        "TopicTags": [
          {
            "Id": "VG9waWNUYWdOb2RlOjU=",
            "Name": "Array",
            "Slug": "array"
          },
          {
            "Id": "VG9waWNUYWdOb2RlOjE3",
            "Name": "Greedy",
            "Slug": "greedy"
          }
        ],
        "CodeSnippets": [
          {
            "Lang": "C++",
            "LangSlug": "cpp",
            "Code": "class Solution {\npublic:\n    int candy(vector<int>& ratings) {\n        \n    }\n};"
          },
          {
            "Lang": "Java",
            "LangSlug": "java",
            "Code": "class Solution {\n    public int candy(int[] ratings) {\n        \n    }\n}"
          },
          {
            "Lang": "Python3",
            "LangSlug": "python3",
            "Code": "class Solution:\n    def candy(self, ratings: List[int]) -> int:\n        "
          },
          {
            "Lang": "Python",
            "LangSlug": "python",
            "Code": "class Solution(object):\n    def candy(self, ratings):\n        \"\"\"\n        :type ratings: List[int]\n        :rtype: int\n        \"\"\"\n        "
          },
          {
            "Lang": "JavaScript",
            "LangSlug": "javascript",
            "Code": "/**\n * @param {number[]} ratings\n * @return {number}\n */\nvar candy = function(ratings) {\n    \n};"
          },
          {
            "Lang": "TypeScript",
            "LangSlug": "typescript",
            "Code": "function candy(ratings: number[]): number {\n    \n};"
          },
          {
            "Lang": "C#",
            "LangSlug": "csharp",
            "Code": "public class Solution {\n    public int Candy(int[] ratings) {\n        \n    }\n}"
          },
          {
            "Lang": "C",
            "LangSlug": "c",
            "Code": "int candy(int* ratings, int ratingsSize) {\n    \n}"
          },
          {
            "Lang": "Go",
            "LangSlug": "golang",
            "Code": "func candy(ratings []int) int {\n    \n}"
          },
          {
            "Lang": "Kotlin",
            "LangSlug": "kotlin",
            "Code": "class Solution {\n    fun candy(ratings: IntArray): Int {\n        \n    }\n}"
          },
          {
            "Lang": "Swift",
            "LangSlug": "swift",
            "Code": "class Solution {\n    func candy(_ ratings: [Int]) -> Int {\n        \n    }\n}"
          },
          {
            "Lang": "Rust",
            "LangSlug": "rust",
            "Code": "impl Solution {\n    pub fn candy(ratings: Vec<i32>) -> i32 {\n        \n    }\n}"
          },
          {
            "Lang": "Ruby",
            "LangSlug": "ruby",
            "Code": "# @param {Integer[]} ratings\n# @return {Integer}\ndef candy(ratings)\n    \nend"
          },
          {
            "Lang": "PHP",
            "LangSlug": "php",
            "Code": "class Solution {\n\n    /**\n     * @param Integer[] $ratings\n     * @return Integer\n     */\n    function candy($ratings) {\n        \n    }\n}"
          },
          {
            "Lang": "Dart",
            "LangSlug": "dart",
            "Code": "class Solution {\n  int candy(List<int> ratings) {\n    \n  }\n}"
          },
          {
            "Lang": "Scala",
            "LangSlug": "scala",
            "Code": "object Solution {\n    def candy(ratings: Array[Int]): Int = {\n        \n    }\n}"
          },
          {
            "Lang": "Elixir",
            "LangSlug": "elixir",
            "Code": "defmodule Solution do\n  @spec candy(ratings :: [integer]) :: integer\n  def candy(ratings) do\n    \n  end\nend"
          },
          {
            "Lang": "Erlang",
            "LangSlug": "erlang",
            "Code": "-spec candy(Ratings :: [integer()]) -> integer().\ncandy(Ratings) ->\n  ."
          },
          {
            "Lang": "Racket",
            "LangSlug": "racket",
            "Code": "(define/contract (candy ratings)\n  (-> (listof exact-integer?) exact-integer?)\n  )"
          }
        ],
        "CompanyTagStats": ""
      }
    },
    "DownloadedAt": "2025-11-17T15:30:40.051555+01:00",
    "AcRate": "47.5",
    "TotalSubmissions": 2001437,
    "TotalAccepted": 950854,
    "AcceptanceRate": 0.4750856509597854,
    "ContentFeatures": "",
    "CodeSnippetFeatures": {
      "c": "",
      "cpp": "",
      "csharp": "",
      "dart": "",
      "elixir": "",
      "erlang": "",
      "golang": "",
      "java": "",
      "javascript": "",
      "kotlin": "",
      "php": "",
      "python": "",
      "python3": "",
      "racket": "",
      "ruby": "",
      "rust": "",
      "scala": "",
      "swift": "",
      "typescript": ""
    },
    "Url": "https://leetcode.com/problems/candy/"
  },
  "Solutions": {
    "google/gemini-2.5-pro": {
      "Lang": "python3",
      "Prompt": "Multi-agent approach:\n1. Analysis\n2. Design\n3. Implementation\n4. Verification",
      "Answer": "=== ANALYSIS ===\nAn elegant and efficient way to solve this problem is using a two-pass greedy approach. The number of candies for any child depends on the ratings of their immediate left and right neighbors. A single pass is insufficient because a decision made based on the left neighbor might violate the constraint with the right neighbor.\n\nThe core idea is to break the problem into two simpler, independent subproblems and then combine the results:\n1.  **Left-to-Right Pass**: Ensure the candy rule is met for every child relative to their left neighbor. We iterate from left to right, and if a child has a higher rating than their left neighbor, we give them one more candy than that neighbor.\n2.  **Right-to-Left Pass**: Ensure the candy rule is met for every child relative to their right neighbor. We iterate from right to left, and if a child has a higher rating than their right neighbor, we make sure they have more candies.\n\nHere's the detailed logic for the implementation:\n1.  Initialize an array, `candies`, of the same size as `ratings`, with each child receiving one candy. This satisfies the first requirement that every child gets at least one candy.\n2.  Perform a **left-to-right pass**:\n    *   Iterate from the second child (`i = 1`) to the end of the line.\n    *   If `ratings[i] > ratings[i-1]`, it means child `i` must have more candies than child `i-1`. To minimize the total, we assign `candies[i] = candies[i-1] + 1`.\n\n3.  At this point, the `candies` array satisfies all left-neighbor constraints. Now, we must also satisfy the right-neighbor constraints without violating the ones we just set.\n4.  Perform a **right-to-left pass**:\n    *   Iterate from the second-to-last child (`i = n-2`) down to the first child.\n    *   If `ratings[i] > ratings[i+1]`, child `i` needs more candies than child `i+1`. The minimum required to satisfy this is `candies[i+1] + 1`.\n    *   However, child `i` already has a value in `candies[i]` from the first pass, which satisfies the left-neighbor constraint. To satisfy both, we must take the maximum of the two requirements. So, we set `candies[i] = max(candies[i], candies[i+1] + 1)`.\n\n5.  After both passes, the `candies` array holds the minimum number of candies for each child that satisfies all conditions. The final answer is the sum of all values in this `candies` array.\n\nThis approach takes O(N) time because we iterate through the array twice. It uses O(N) space for the `candies` array. Given the constraints, this is an optimal solution in terms of time complexity and well within acceptable memory limits.\n```python\nimport collections\n\nclass Solution:\n    def candy(self, ratings: list[int]) -> int:\n        n = len(ratings)\n        if n <= 1:\n            return n\n\n        candies = [1] * n\n\n        # First pass: from left to right\n        # This ensures that any child with a higher rating than their left neighbor\n        # gets more candies than that neighbor.\n        for i in range(1, n):\n            if ratings[i] > ratings[i-1]:\n                candies[i] = candies[i-1] + 1\n\n        # Second pass: from right to left\n        # This ensures that any child with a higher rating than their right neighbor\n        # gets more candies. We take the max with the current candy count to ensure\n        # the left-to-right condition is also maintained.\n        for i in range(n - 2, -1, -1):\n            if ratings[i] > ratings[i+1]:\n                candies[i] = max(candies[i], candies[i+1] + 1)\n\n        return sum(candies)\n```\n\n=== DESIGN ===\n\n\n=== IMPLEMENTATION ===\n```python\nfrom typing import List\n\nclass Solution:\n    def candy(self, ratings: List[int]) -> int:\n        n = len(ratings)\n        if n <= 1:\n            return n\n\n        candies = [1] * n\n\n        for i in range(1, n):\n            if ratings[i] > ratings[i-1]:\n                candies[i] = candies[i-1] + 1\n\n        for i in range(n - 2, -1, -1):\n            if ratings[i] > ratings[i+1]:\n                candies[i] = max(candies[i], candies[i+1] + 1)\n\n        return sum(candies)\n```\n\n=== VERIFICATION ===\n```python\nfrom typing import List\nclass Solution:\n    def candy(self, ratings: List[int]) -> int:\n        n = len(ratings)\n        if n == 0:\n            return 0\n        \n        candies = [1] * n\n        \n        # Left-to-right pass\n        for i in range(1, n):\n            if ratings[i] > ratings[i-1]:\n                candies[i] = candies[i-1] + 1\n        \n        # Right-to-left pass\n        # We need to sum up candies as we go to save space, but lets stick to the provided analysis.\n        # The sum will be calculated at the end.\n        \n        for i in range(n - 2, -1, -1):\n            if ratings[i] > ratings[i+1]:\n                candies[i] = max(candies[i], candies[i+1] + 1)\n        \n        return sum(candies)\n\n```\n\n",
      "TypedCode": "\nfrom typing import List\n\nclass Solution:\n    def candy(self, ratings: List[int]) -> int:\n        n = len(ratings)\n        if n <= 1:\n            return n\n\n        candies = [1] * n\n\n        for i in range(1, n):\n            if ratings[i] > ratings[i-1]:\n                candies[i] = candies[i-1] + 1\n\n        for i in range(n - 2, -1, -1):\n            if ratings[i] > ratings[i+1]:\n                candies[i] = max(candies[i], candies[i+1] + 1)\n\n        return sum(candies)\n",
      "Model": "google/gemini-2.5-pro",
      "Latency": 293687767083,
      "SolvedAt": "2025-11-21T09:11:11.94489+01:00",
      "PromptTokens": 3863,
      "OutputTokens": 25384
    }
  },
  "Submissions": {
    "google/gemini-2.5-pro": {
      "SubmitRequest": {
        "lang": "python3",
        "question_id": "135",
        "typed_code": "\nfrom typing import List\n\nclass Solution:\n    def candy(self, ratings: List[int]) -> int:\n        n = len(ratings)\n        if n <= 1:\n            return n\n\n        candies = [1] * n\n\n        for i in range(1, n):\n            if ratings[i] > ratings[i-1]:\n                candies[i] = candies[i-1] + 1\n\n        for i in range(n - 2, -1, -1):\n            if ratings[i] > ratings[i+1]:\n                candies[i] = max(candies[i], candies[i+1] + 1)\n\n        return sum(candies)\n"
      },
      "SubmissionId": 0,
      "CheckResponse": {
        "status_code": 10,
        "status_msg": "Accepted",
        "Finished": true,
        "State": "SUCCESS"
      },
      "SubmittedAt": "2025-11-21T20:51:23+01:00"
    }
  }
}